---
tags: ['杂谈', 'CSS', '动效']
---

import { SVGLoading } from "../components/svg-loading"
import "../components/css-effect.css"

# CSS Effect

<PageMeta />


## SVG spinner

这个 CSS 特效出自 [Making SVG Loading Spinners: An Interactive Guide](https://www.fffuel.co/svg-spinner/)

<div className="flex flex-center h-60">
  <svg width="200" height="200" viewBox="-200 -200 400 400">
    <circle
      className="svg-spinner"
      cx="0"
      cy="0"
      r="100"
      fill="none"
      stroke="#59AFFF"
      strokeWidth="24"
      strokeLinecap="round"
      strokeDasharray="1 314"
      strokeDashoffset="0"
    />
  </svg>
</div>

<CodeGroup>
```html
<svg width="200" height="200" viewBox="-200 -200 400 400">
  <circle
    class="svg-spinner"
    cx="0"
    cy="0"
    r="100"
    fill="none"
    stroke="#59AFFF"
    stroke-width="24"
    stroke-linecap="round"
    stroke-dasharray="1 314"
    stroke-dashoffset="0"
  />
</svg>
```

```css
.svg-spinner {
  animation:
    spin1 1s linear infinite,
    spin2 2s ease-in-out infinite alternate;
}

@keyframes spin1 {
  to {
    rotate: 1turn;
  }
}

@keyframes spin2 {
  0%, 100% {
    stroke-dasharray: 1 314;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 310 2;
    stroke-dashoffset: -155;
  }
}
```
</CodeGroup>

## 炫彩边框

这个 CSS 特效出自 [turbo 官网](https://turbo.build/)。

<div className="flex flex-center h-60">
  <div className="border-container">
    <div className="colorful-border"></div>
  </div>
</div>

<CodeGroup>
```html
<div class="border-container">
  <div class="colorful-border"></div>
</div>
```

```css
.border-container {
  position: relative;
  width: 200px;
  height: 200px;
  border-radius: 10px;
  overflow: hidden;
}

.colorful-border {
  position: absolute;
  inset: 0;
  padding: 10px;
  mask:
    linear-gradient(0, #fff, #fff) content-box,
    linear-gradient(0, #fff, #fff);
  mask-composite: exclude;
}

.colorful-border::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  translate: -50% -50%;
  width: 200%;
  padding-bottom: 200%;
  background: conic-gradient(
    #e92a67 0deg,
    #a853ba 135deg,
    #2a8af6 215deg,
    hsla(0, 0%, 100%, 0.1) 360deg
  );
  animation: ring-flow 2s linear infinite;
}

@keyframes ring-flow {
  to {
    rotate: 1turn;
  }
}
```
</CodeGroup>

## 网格动画

这个 CSS 特效出自 [turbo 官网](https://turbo.build/)。

<div className="flex flex-center">
  <div className="grid-view">
    <div className="grid-stage">
      <div className="grid-flat"></div>
    </div>
  </div>
</div>

<CodeGroup>
```html
<div class="grid-view">
  <div class="grid-stage">
    <div class="grid-flat"></div>
  </div>
</div>
```

```css
.grid-view {
  position: relative;
  width: 600px;
  height: 600px;
  perspective: 1000px;
}

.grid-stage {
  position: absolute;
  inset: 0;
  overflow: hidden;
  transform: rotateX(60deg);
}

.grid-flat {
  position: absolute;
  inset: -100% 0;
  background: linear-gradient(
    to right,
    #b9ddff 45%,
    transparent 50%,
    #f8cde8 55%
  );
  mask-image: linear-gradient(90deg, #000 2px, transparent 0),
    linear-gradient(180deg, #000 2px, transparent 0);
  mask-size: 60px 60px;
  mask-repeat: repeat;
  mask-position: 50% 0;
  animation: grid-flow 10s linear infinite;
}

@keyframes grid-flow {
  to {
    transform: translateY(50%);
  }
}
```
</CodeGroup>

## playon

<div className="flex flex-center h-60">
  <svg
    viewBox="0 0 32 32"
    width="1em"
    height="1em"
    style={{fontSize: '128px', color: 'oklch(0.645 0.246 16.439)'}}
  >
    <g stroke="currentColor" strokeWidth="6" strokeLinecap="round">
      <line x1="7" y1="10" x2="7" y2="26">
        <animate
          attributeName="y1"
          values="10;20;10"
          dur="0.8s"
          repeatCount="indefinite"
        ></animate>
      </line>
      <line x1="16" y1="6" x2="16" y2="26">
        <animate
          attributeName="y1"
          values="18;6;18"
          dur="0.8s"
          repeatCount="indefinite"
        ></animate>
      </line>
      <line x1="25" y1="8" x2="25" y2="26">
        <animate
          attributeName="y1"
          values="8;20;8"
          dur="0.8s"
          repeatCount="indefinite"
        ></animate>
      </line>
    </g>
  </svg>
</div>

```html
<svg
  viewBox="0 0 32 32"
  width="1em"
  height="1em"
  style="font-size: 128px; color: oklch(0.645 0.246 16.439)"
>
  <g stroke="currentColor" stroke-width="6" stroke-linecap="round">
    <line x1="7" y1="10" x2="7" y2="26">
      <animate
        attributeName="y1"
        values="10;20;10"
        dur="0.8s"
        repeatCount="indefinite"
      ></animate>
    </line>
    <line x1="16" y1="6" x2="16" y2="26">
      <animate
        attributeName="y1"
        values="18;6;18"
        dur="0.8s"
        repeatCount="indefinite"
      ></animate>
    </line>
    <line x1="25" y1="8" x2="25" y2="26">
      <animate
        attributeName="y1"
        values="8;20;8"
        dur="0.8s"
        repeatCount="indefinite"
      ></animate>
    </line>
  </g>
</svg>
```

## 下拉 Loading

<SVGLoading />

<CodeGroup>
```html
<div class="flex flex-col gap-4 flex-center">
  <div class="text-zinc text-center">
    <input
      :max="maxValue"
      min="0"
      name="range"
      type="range"
      :value="scrollValue"
      @input="onInput"
    />
    <div>
      <label for="range">当前值: {{ scrollValue }}</label>
    </div>
    <div>最大滚动值: {{ scrollValueMax }}</div>
  </div>

  <svg
    class="svg-loading"
    :data-loading="loading"
    fill="none"
    height="1em"
    stroke="currentColor"
    stroke-width="3"
    viewBox="0 0 32 32"
    width="1em"
  >
    <g
      :opacity="opacitValue"
      :transform="`rotate(${rotateValue})`"
      transform-origin="16 16"
    >
      <circle
        cx="16"
        cy="16"
        r="12"
        stroke-dasharray="100"
        :stroke-dashoffset="dashoffset"
        stroke-linecap="round"
        transform="rotate(-45)"
        transform-origin="16 16"
      />
    </g>
  </svg>
</div>
```

```css
.svg-loading {
  border-radius: 50%;
  padding: 10px;
  font-size: 96px;
  color: hsl(263 100% 70%);
  background-color: #fff;
  box-shadow: 0 0 10px 4px hsl(263 100% 70% / 0.4);
}

.svg-loading[data-loading='true'] {
  animation: rotate 1s linear infinite;
}
```

```ts
const defaultValue = 10

// 用滑块来模拟移动端下拉
const scrollValue = ref(defaultValue)
const scrollValueMax = 120
const maxValue = 160

// dashValue 至少要比 svg 的圆周大
const dashValue = 100
// 设置默认偏移量为 dashValue 完全隐藏圆弧轨迹
const dashoffset = ref(dashValue - defaultValue)
// 设置最小偏移量，达到不显示完整的圆弧效果
const dashoffsetMin = 40

// 旋转角度
const rotateValue = ref(0)
// 转动 3/4周
const rotateValueMax = 270

// 透明度
const opacitValue = ref(0.4)

const loading = ref(false)

function onInput(event: Event) {
  const target = event.target as HTMLInputElement
  scrollValue.value = Number(target.value)
  const value = Math.min(scrollValue.value, scrollValueMax)

  const percentage = value / scrollValueMax
  dashoffset.value = Math.floor(
    Math.max(dashoffsetMin, dashValue - dashValue * percentage)
  )

  rotateValue.value = rotateValueMax * percentage
  // 0.4是最低的透明度
  opacitValue.value = (1 - 0.4) * percentage + 0.4

  // 用最大值来模拟下拉松开情景，触发loading
  loading.value = scrollValue.value === maxValue
}
```
</CodeGroup>
